query DefinitionQuery($repository: String!, $revision: String!, $path: String!, $line: Int!, $character: Int!, $query: String!) {
  repository(name: $repository) {
    commit(rev: $revision) {
      blob(path: $path) {
        name
        path
        lsif {
          definitions(line: $line, character: $character) {
            nodes {
              url
              resource {
                path
              }
              range {
                start {
                  line
                  character
                }
                end {
                  line
                  character
                }
              }
            }
          }
        }
      }
    }
  }

  search(patternType: regexp, query: $query) {
    results {
      results {
        __typename
        ... on FileMatch {
          symbols {
            name
            canonicalURL
            location {
              range {
                start {
                  line
                  character
                }
                end {
                  line
                  character
                }
              }
            }
          }
        }
      }
    }
  }
}
